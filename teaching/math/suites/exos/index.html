<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz - Limites des Suites</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      h1 {
        color: #667eea;
        text-align: center;
        margin-bottom: 10px;
        font-size: 2.5em;
      }

      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
        font-size: 1.1em;
      }

      .progress-bar {
        width: 100%;
        height: 30px;
        background: #f0f0f0;
        border-radius: 15px;
        overflow: hidden;
        margin-bottom: 30px;
        position: relative;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        transition: width 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
      }

      .question-card {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 10px;
        margin-bottom: 20px;
        border: 3px solid #667eea;
      }

      .question-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .question-number {
        background: #667eea;
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 1.1em;
      }

      .difficulty {
        padding: 6px 14px;
        border-radius: 15px;
        font-weight: bold;
        font-size: 0.9em;
      }

      .difficulty.facile {
        background: #c8e6c9;
        color: #2e7d32;
      }

      .difficulty.moyen {
        background: #fff9c4;
        color: #f57f17;
      }

      .difficulty.difficile {
        background: #ffcdd2;
        color: #c62828;
      }

      .question-text {
        font-size: 1.3em;
        color: #333;
        margin-bottom: 25px;
        text-align: center;
        padding: 20px;
        background: white;
        border-radius: 8px;
        font-weight: 500;
      }

      .options {
        display: grid;
        gap: 15px;
      }

      .option {
        background: white;
        border: 3px solid #ddd;
        padding: 20px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1.2em;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 70px;
      }

      .option:hover {
        border-color: #667eea;
        background: #f0f4ff;
        transform: translateX(5px);
      }

      .option.selected {
        border-color: #667eea;
        background: #e3f2fd;
      }

      .option.correct {
        border-color: #4caf50;
        background: #c8e6c9;
        animation: correctPulse 0.5s;
      }

      .option.incorrect {
        border-color: #f44336;
        background: #ffcdd2;
        animation: shake 0.5s;
      }

      @keyframes correctPulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-10px);
        }
        75% {
          transform: translateX(10px);
        }
      }

      .buttons {
        display: flex;
        gap: 15px;
        margin-top: 25px;
        justify-content: center;
      }

      button {
        background: #667eea;
        color: white;
        border: none;
        padding: 15px 40px;
        border-radius: 25px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      button:hover {
        background: #764ba2;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      button:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
      }

      .feedback {
        margin-top: 20px;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        font-weight: bold;
        font-size: 1.1em;
        display: none;
      }

      .feedback.show {
        display: block;
        animation: slideDown 0.3s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .feedback.correct {
        background: #c8e6c9;
        color: #2e7d32;
        border: 3px solid #4caf50;
      }

      .feedback.incorrect {
        background: #ffcdd2;
        color: #c62828;
        border: 3px solid #f44336;
      }

      .explanation {
        margin-top: 15px;
        padding: 15px;
        background: #f0f4ff;
        border-radius: 8px;
        text-align: left;
        color: #333;
        font-weight: normal;
        font-size: 1em;
        line-height: 1.6;
      }

      .results {
        text-align: center;
        padding: 40px;
      }

      .score {
        font-size: 4em;
        font-weight: bold;
        color: #667eea;
        margin: 20px 0;
      }

      .score-message {
        font-size: 1.5em;
        color: #666;
        margin-bottom: 30px;
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin: 30px 0;
      }

      .stat-card {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        border: 2px solid #667eea;
      }

      .stat-value {
        font-size: 2.5em;
        font-weight: bold;
        color: #667eea;
      }

      .stat-label {
        color: #666;
        margin-top: 5px;
      }

      .hidden {
        display: none;
      }

      .formula {
        font-family: "Times New Roman", serif;
        font-style: italic;
      }

      sub {
        font-size: 0.8em;
      }

      sup {
        font-size: 0.8em;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>🎯 Quiz - Limites des Suites</h1>
      <p class="subtitle">
        Testez vos connaissances sur les limites - 20 questions
      </p>

      <div class="progress-bar">
        <div class="progress-fill" id="progressBar">
          <span id="progressText">0/20</span>
        </div>
      </div>

      <div id="quizContainer"></div>

      <div id="resultsContainer" class="results hidden">
        <h2>🎉 Quiz Terminé !</h2>
        <div class="score" id="finalScore"></div>
        <div class="score-message" id="scoreMessage"></div>

        <div class="stats">
          <div class="stat-card">
            <div class="stat-value" id="correctCount"></div>
            <div class="stat-label">Correctes</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="incorrectCount"></div>
            <div class="stat-label">Incorrectes</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="percentageScore"></div>
            <div class="stat-label">Pourcentage</div>
          </div>
        </div>

        <button onclick="restartQuiz()">🔄 Recommencer</button>
      </div>
    </div>

    <script>
      const questions = [
        // Niveau Facile (Questions 1-7)
        {
          question: "lim<sub>n→+∞</sub> (5)",
          options: ["5", "0", "+∞"],
          correct: 0,
          difficulty: "facile",
          explanation:
            "Une suite constante a pour limite la constante elle-même.",
        },
        {
          question: "lim<sub>n→+∞</sub> (3n)",
          options: ["+∞", "3", "0"],
          correct: 0,
          difficulty: "facile",
          explanation: "3n tend vers +∞ car n tend vers +∞.",
        },
        {
          question: "lim<sub>n→+∞</sub> (1/n)",
          options: ["0", "1", "+∞"],
          correct: 0,
          difficulty: "facile",
          explanation: "Quand n augmente, 1/n diminue et tend vers 0.",
        },
        {
          question: "lim<sub>n→+∞</sub> (n²)",
          options: ["+∞", "0", "1"],
          correct: 0,
          difficulty: "facile",
          explanation: "n² croît plus vite que n et tend vers +∞.",
        },
        {
          question: "lim<sub>n→+∞</sub> (-2n)",
          options: ["-∞", "+∞", "0"],
          correct: 0,
          difficulty: "facile",
          explanation:
            "-2n est négatif et sa valeur absolue augmente, donc tend vers -∞.",
        },
        {
          question: "lim<sub>n→+∞</sub> (n + 5)",
          options: ["+∞", "5", "0"],
          correct: 0,
          difficulty: "facile",
          explanation: "n + 5 ~ n quand n → +∞, donc tend vers +∞.",
        },
        {
          question: "lim<sub>n→+∞</sub> (0,5)<sup>n</sup>",
          options: ["0", "+∞", "0,5"],
          correct: 0,
          difficulty: "facile",
          explanation: "Pour 0 < q < 1, q<sup>n</sup> → 0.",
        },

        // Niveau Moyen (Questions 8-14)
        {
          question: "lim<sub>n→+∞</sub> (2n² + 3n)",
          options: ["+∞", "0", "2"],
          correct: 0,
          difficulty: "moyen",
          explanation: "Le terme dominant est 2n², donc la limite est +∞.",
        },
        {
          question: "lim<sub>n→+∞</sub> (n² - n)",
          options: ["+∞", "0", "-∞"],
          correct: 0,
          difficulty: "moyen",
          explanation: "n²(1 - 1/n) → +∞ car n² domine.",
        },
        {
          question: "lim<sub>n→+∞</sub> ((2n + 1)/(n + 3))",
          options: ["2", "0", "+∞"],
          correct: 0,
          difficulty: "moyen",
          explanation: "Diviser par n : (2 + 1/n)/(1 + 3/n) → 2/1 = 2.",
        },
        {
          question: "lim<sub>n→+∞</sub> ((3n² + 5)/(n² - 1))",
          options: ["3", "0", "+∞"],
          correct: 0,
          difficulty: "moyen",
          explanation: "Les termes dominants sont 3n²/n² → 3.",
        },
        {
          question: "lim<sub>n→+∞</sub> (√n)",
          options: ["+∞", "0", "1"],
          correct: 0,
          difficulty: "moyen",
          explanation: "√n croît indéfiniment mais moins vite que n.",
        },
        {
          question: "lim<sub>n→+∞</sub> ((n + 1)/n)",
          options: ["1", "0", "+∞"],
          correct: 0,
          difficulty: "moyen",
          explanation: "(n + 1)/n = 1 + 1/n → 1 + 0 = 1.",
        },
        {
          question: "lim<sub>n→+∞</sub> ((5n)/(2n + 3))",
          options: ["5/2", "0", "+∞"],
          correct: 0,
          difficulty: "moyen",
          explanation: "Diviser par n : 5/(2 + 3/n) → 5/2.",
        },

        // Niveau Difficile (Questions 15-20)
        {
          question: "lim<sub>n→+∞</sub> ((n³ + 2n)/(2n³ - 5))",
          options: ["1/2", "0", "+∞"],
          correct: 0,
          difficulty: "difficile",
          explanation: "Termes dominants : n³/2n³ = 1/2.",
        },
        {
          question: "lim<sub>n→+∞</sub> ((2n² + 5)/(n³ + 1))",
          options: ["0", "2", "+∞"],
          correct: 0,
          difficulty: "difficile",
          explanation: "Degré du dénominateur > degré du numérateur → 0.",
        },
        {
          question: "lim<sub>n→+∞</sub> ((n⁴ - 3)/(n² + 5))",
          options: ["+∞", "0", "1"],
          correct: 0,
          difficulty: "difficile",
          explanation: "n⁴/n² = n² → +∞.",
        },
        {
          question: "lim<sub>n→+∞</sub> (n·sin(1/n))",
          options: ["1", "0", "+∞"],
          correct: 0,
          difficulty: "difficile",
          explanation:
            "Poser u = 1/n : sin(u)/u → 1 quand u → 0, donc n·sin(1/n) → 1.",
        },
        {
          question: "lim<sub>n→+∞</sub> ((√(n² + n) - n))",
          options: ["1/2", "0", "+∞"],
          correct: 0,
          difficulty: "difficile",
          explanation:
            "Multiplier par la quantité conjuguée : n/(√(n²+n) + n) → n/2n = 1/2.",
        },
        {
          question: "lim<sub>n→+∞</sub> ((3n + (-1)<sup>n</sup>)/n)",
          options: ["3", "0", "n'existe pas"],
          correct: 0,
          difficulty: "difficile",
          explanation:
            "(3n + (-1)<sup>n</sup>)/n = 3 + (-1)<sup>n</sup>/n → 3 + 0 = 3.",
        },
      ];

      let currentQuestion = 0;
      let score = 0;
      let answered = false;

      function loadQuestion() {
        answered = false;
        const q = questions[currentQuestion];
        const container = document.getElementById("quizContainer");

        container.innerHTML = `
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number">Question ${
                          currentQuestion + 1
                        }/20</span>
                        <span class="difficulty ${q.difficulty}">
                            ${
                              q.difficulty.charAt(0).toUpperCase() +
                              q.difficulty.slice(1)
                            }
                        </span>
                    </div>
                    
                    <div class="question-text formula">
                        ${q.question}
                    </div>
                    
                    <div class="options">
                        ${q.options
                          .map(
                            (opt, i) => `
                            <div class="option" onclick="selectOption(${i})" data-option="${i}">
                                ${opt}
                            </div>
                        `
                          )
                          .join("")}
                    </div>
                    
                    <div class="feedback" id="feedback"></div>
                    
                    <div class="buttons">
                        <button id="validateBtn" onclick="validateAnswer()" disabled>
                            Valider
                        </button>
                        <button id="nextBtn" onclick="nextQuestion()" style="display: none;">
                            Question suivante →
                        </button>
                    </div>
                </div>
            `;

        updateProgress();
      }

      function selectOption(index) {
        if (answered) return;

        const options = document.querySelectorAll(".option");
        options.forEach((opt) => opt.classList.remove("selected"));
        options[index].classList.add("selected");

        document.getElementById("validateBtn").disabled = false;
      }

      function validateAnswer() {
        if (answered) return;
        answered = true;

        const selected = document.querySelector(".option.selected");
        if (!selected) return;

        const selectedIndex = parseInt(selected.dataset.option);
        const q = questions[currentQuestion];
        const feedback = document.getElementById("feedback");
        const options = document.querySelectorAll(".option");

        options.forEach((opt) => (opt.style.cursor = "not-allowed"));

        if (selectedIndex === q.correct) {
          selected.classList.add("correct");
          feedback.innerHTML = `
                    <div>✅ Excellent ! Bonne réponse !</div>
                    <div class="explanation">${q.explanation}</div>
                `;
          feedback.className = "feedback correct show";
          score++;
        } else {
          selected.classList.add("incorrect");
          options[q.correct].classList.add("correct");
          feedback.innerHTML = `
                    <div>❌ Incorrect. La bonne réponse est : ${
                      q.options[q.correct]
                    }</div>
                    <div class="explanation">${q.explanation}</div>
                `;
          feedback.className = "feedback incorrect show";
        }

        document.getElementById("validateBtn").style.display = "none";
        document.getElementById("nextBtn").style.display = "inline-block";
      }

      function nextQuestion() {
        currentQuestion++;

        if (currentQuestion < questions.length) {
          loadQuestion();
        } else {
          showResults();
        }
      }

      function updateProgress() {
        const progress = (currentQuestion / questions.length) * 100;
        document.getElementById("progressBar").style.width = progress + "%";
        document.getElementById(
          "progressText"
        ).textContent = `${currentQuestion}/${questions.length}`;
      }

      function showResults() {
        document.getElementById("quizContainer").classList.add("hidden");
        document.getElementById("resultsContainer").classList.remove("hidden");

        const percentage = Math.round((score / questions.length) * 100);

        document.getElementById(
          "finalScore"
        ).textContent = `${score}/${questions.length}`;
        document.getElementById("correctCount").textContent = score;
        document.getElementById("incorrectCount").textContent =
          questions.length - score;
        document.getElementById("percentageScore").textContent =
          percentage + "%";

        let message = "";
        if (percentage === 100) {
          message = "🏆 Parfait ! Vous maîtrisez les limites !";
        } else if (percentage >= 80) {
          message = "🌟 Excellent travail ! Très bon niveau !";
        } else if (percentage >= 60) {
          message = "👍 Bon travail ! Continuez à vous entraîner.";
        } else if (percentage >= 40) {
          message = "💪 Pas mal ! Révisez les notions importantes.";
        } else {
          message = "📚 Continuez à travailler, vous allez progresser !";
        }

        document.getElementById("scoreMessage").textContent = message;

        // Update final progress bar
        document.getElementById("progressBar").style.width = "100%";
        document.getElementById("progressText").textContent = `20/20`;
      }

      function restartQuiz() {
        currentQuestion = 0;
        score = 0;
        answered = false;
        document.getElementById("quizContainer").classList.remove("hidden");
        document.getElementById("resultsContainer").classList.add("hidden");
        loadQuestion();
      }

      // Start quiz
      loadQuestion();
    </script>
  </body>
</html>
